/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.17.1.
 * Original file: /npm/on-change@4.0.2/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const e=".",t=Symbol("target"),s=Symbol("unsubscribe");function n(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}var i=Array.isArray;function r(e){return"symbol"==typeof e}const a={after:(e,t)=>i(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(t,s)=>i(t)?(t=[...t],s&&t.push(s),t):s&&void 0!==s.toString?(""!==t&&(t+=e),r(s)?t+s.toString():t+s):t,initial:t=>{if(i(t))return t.slice(0,-1);if(""===t)return t;const s=t.lastIndexOf(e);return-1===s?"":t.slice(0,s)},last:t=>{if(i(t))return t[t.length-1]||"";if(""===t)return t;const s=t.lastIndexOf(e);return-1===s?t:t.slice(s+1)},walk:(t,s)=>{if(i(t))for(const e of t)s(e);else if(""!==t){let n=0,i=t.indexOf(e);if(-1===i)s(t);else for(;n<t.length;)-1===i&&(i=t.length),s(t.slice(n,i)),n=i+1,i=t.indexOf(e,n)}},get(e,t){return this.walk(t,(t=>{e&&(e=e[t])})),e}};function o(e,t,s){return e.isUnsubscribed||t.ignoreSymbols&&r(s)||t.ignoreUnderscores&&"_"===s.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(s)}class c{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){const t=this._getDescriptorCache();let s=t.get(e);return void 0===s&&(s={},t.set(e,s)),s}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);const s=this._getProperties(e);let n=s[t];return void 0===n&&(n=Reflect.getOwnPropertyDescriptor(e,t),s[t]=n),n}getProxy(e,t,s,n){if(this.isUnsubscribed)return e;const i=e[n],r=i||e;this._pathCache.set(r,t);let a=this._proxyCache.get(r);return void 0===a&&(a=void 0===i?new Proxy(e,s):e,this._proxyCache.set(r,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,a.get(t,this.getPath(e)))}defineProperty(e,t,s){return!!Reflect.defineProperty(e,t,s)&&(this.isUnsubscribed||(this._getProperties(e)[t]=s),!0)}setProperty(e,t,s,n,i){if(!this._equals(i,s)||!(t in e)){const i=this._getOwnPropertyDescriptor(e,t);return void 0!==i&&"set"in i?Reflect.set(e,t,s,n):Reflect.set(e,t,s)}return!0}deleteProperty(e,t,s){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){const n=this._getDescriptorCache().get(e);n&&(delete n[t],this._pathCache.delete(s))}return!0}return!1}isSameDescriptor(e,t,s){const n=this._getOwnPropertyDescriptor(t,s);return void 0!==e&&void 0!==n&&Object.is(e.value,n.value)&&(e.writable||!1)===(n.writable||!1)&&(e.enumerable||!1)===(n.enumerable||!1)&&(e.configurable||!1)===(n.configurable||!1)&&e.get===n.get&&e.set===n.set}isGetInvariant(e,t){const s=this._getOwnPropertyDescriptor(e,t);return void 0!==s&&!0!==s.configurable&&!0!==s.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}}function h(e){return"[object Object]"===toString.call(e)}function l(){return!0}function u(e,t){return e.length!==t.length||e.some(((e,s)=>t[s]!==e))}const d=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),f=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),p={push:l,pop:l,shift:l,unshift:l,copyWithin:u,reverse:u,sort:u,splice:u,flat:u,fill:u},g=new Set([...d,...f,...Object.keys(p)]);function _(e,t){if(e.size!==t.size)return!0;for(const s of e)if(!t.has(s))return!0;return!1}const y=["keys","values","entries"],w=new Set(["has","toString"]),b={add:_,clear:_,delete:_,forEach:_},v=new Set([...w,...Object.keys(b),...y]);function C(e,t){if(e.size!==t.size)return!0;let s;for(const[n,i]of e)if(s=t.get(n),s!==i||void 0===s&&!t.has(n))return!0;return!1}const k=new Set([...w,"get"]),P={set:C,clear:C,delete:C,forEach:C},S=new Set([...k,...Object.keys(P),...y]);class x{constructor(e,t,s,n){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=n,this._changes=n?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return d.has(e)}_shallowClone(e){let t=e;if(h(e))t={...e};else if(i(e)||ArrayBuffer.isView(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map((e=>this._shallowClone(e))));else if(e instanceof Map){t=new Map;for(const[s,n]of e.entries())t.set(s,this._shallowClone(n))}return this._clonedCache.add(t),t}preferredThisArg(e,t,s,n){return e?(i(n)?this._onIsChanged=p[t]:n instanceof Set?this._onIsChanged=b[t]:n instanceof Map&&(this._onIsChanged=P[t]),n):s}update(e,t,s){const n=a.after(e,this._path);if("length"!==t){let e=this.clone;a.walk(n,(t=>{e&&e[t]&&(this._clonedCache.has(e[t])||(e[t]=this._shallowClone(e[t])),e=e[t])})),this._hasOnValidate&&this._changes.push({path:n,property:t,previous:s}),e&&e[t]&&(e[t]=s)}this._isChanged=!0}undo(e){let t;for(let s=this._changes.length-1;-1!==s;s--)t=this._changes[s],a.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}}class O extends x{static isHandledMethod(e){return g.has(e)}}class M extends x{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}}class m extends x{static isHandledMethod(e){return v.has(e)}undo(e){for(const t of this.clone)e.add(t);for(const t of e)this.clone.has(t)||e.delete(t)}}class D extends x{static isHandledMethod(e){return S.has(e)}undo(e){for(const[t,s]of this.clone.entries())e.set(t,s);for(const t of e.keys())this.clone.has(t)||e.delete(t)}}class H extends x{constructor(e,t,s,n){super(void 0,t,s,n),this._arg1=s[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}}class V extends x{constructor(e,t,s,n){super(void 0,t,s,n),this._weakKey=s[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){const t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}}class R{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return h(e)||i(e)||n(e)}static isHandledMethod(e,t){return h(e)?x.isHandledMethod(t):i(e)?O.isHandledMethod(t):e instanceof Set?m.isHandledMethod(t):e instanceof Map?D.isHandledMethod(t):n(e)}get isCloning(){return this._stack.length>0}start(e,t,s){let n=x;i(e)?n=O:e instanceof Date?n=M:e instanceof Set?n=m:e instanceof Map?n=D:e instanceof WeakSet?n=H:e instanceof WeakMap&&(n=V),this._stack.push(new n(e,t,s,this._hasOnValidate))}update(e,t,s){this._stack[this._stack.length-1].update(e,t,s)}preferredThisArg(e,t,s){const{name:n}=e,i=R.isHandledMethod(s,n);return this._stack[this._stack.length-1].preferredThisArg(i,n,t,s)}isChanged(e,t,s){return this._stack[this._stack.length-1].isChanged(e,t,s)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}}const A={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},U=(e,i,h={})=>{h={...A,...h};const l=Symbol("ProxyTarget"),{equals:u,isShallow:d,ignoreDetached:f,details:p}=h,g=new c(u),_="function"==typeof h.onValidate,y=new R(_),w=(e,t,s,n,i)=>!_||y.isCloning||!0===h.onValidate(a.concat(g.getPath(e),t),s,n,i),b=(t,s,n,i)=>{o(g,h,s)||f&&g.isDetached(t,e)||v(g.getPath(t),s,n,i)},v=(e,t,s,n,r)=>{y.isCloning?y.update(e,t,n):i(a.concat(e,t),s,n,r)},C=e=>e&&e[l]||e,k=(t,s,n,i)=>function(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(t)||"constructor"===n||d&&!R.isHandledMethod(s,n)||o(g,h,n)||g.isGetInvariant(s,n)||f&&g.isDetached(s,e)?t:(void 0===i&&(i=g.getPath(s)),g.getProxy(t,a.concat(i,n),P,l)),P={get(e,i,a){if(r(i)){if(i===l||i===t)return e;if(i===s&&!g.isUnsubscribed&&0===g.getPath(e).length)return g.unsubscribe(),e}const o=n(e)?Reflect.get(e,i):Reflect.get(e,i,a);return k(o,e,i)},set(e,t,s,n){s=C(s);const i=e[l]||e,r=i[t];if(u(r,s)&&t in e)return!0;const a=w(e,t,s,r);return a&&g.setProperty(i,t,s,n,r)?(b(e,t,e[t],r),!0):!a},defineProperty(e,t,s){if(!g.isSameDescriptor(s,e,t)){const n=e[t];w(e,t,s.value,n)&&g.defineProperty(e,t,s,n)&&b(e,t,s.value,n)}return!0},deleteProperty(e,t){if(!Reflect.has(e,t))return!0;const s=Reflect.get(e,t),n=w(e,t,void 0,s);return n&&g.deleteProperty(e,t,s)?(b(e,t,void 0,s),!0):!n},apply(s,n,i){const r=n[l]||n;if(g.isUnsubscribed)return Reflect.apply(s,r,i);if((!1===p||!0!==p&&!p.includes(s.name))&&R.isHandledType(r)){let c=a.initial(g.getPath(s));const h=R.isHandledMethod(r,s.name);y.start(r,c,i);let l=Reflect.apply(s,y.preferredThisArg(s,n,r),h?i.map((e=>C(e))):i);const d=y.isChanged(r,u),f=y.stop();if(R.isHandledType(l)&&h&&(n instanceof Map&&"get"===s.name&&(c=a.concat(c,i[0])),l=g.getProxy(l,c,P)),d){const t={name:s.name,args:i,result:l},n=y.isCloning?a.initial(c):c,o=y.isCloning?a.last(c):"";w(a.get(e,n),o,r,f,t)?v(n,o,r,f,t):y.undo(r)}return(n instanceof Map||n instanceof Set)&&("object"==typeof(o=l)&&"function"==typeof o.next)?function(e,s,n,i,r){const a=e.next;if("entries"===s.name)e.next=function(){const e=a.call(this);return!1===e.done&&(e.value[0]=r(e.value[0],s,e.value[0],i),e.value[1]=r(e.value[1],s,e.value[0],i)),e};else if("values"===s.name){const o=n[t].keys();e.next=function(){const e=a.call(this);return!1===e.done&&(e.value=r(e.value,s,o.next().value,i)),e}}else e.next=function(){const e=a.call(this);return!1===e.done&&(e.value=r(e.value,s,e.value,i)),e};return e}(l,s,n,c,k):l}var o;return Reflect.apply(s,n,i)}},S=g.getProxy(e,h.pathAsArray?[]:"",P);return i=i.bind(S),_&&(h.onValidate=h.onValidate.bind(S)),S};U.target=e=>e&&e[t]||e,U.unsubscribe=e=>e[s]||e;export{U as default};
//# sourceMappingURL=/sm/5984fde14570c263116774b83e4065d65df2153465b7d6480f4c4c325b65d8d6.map